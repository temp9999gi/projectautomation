<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
 
<sqlMap>
	
	<typeAlias alias="cdVO" type="lfis.sample.cd.vo.CdVO"/> 


	<resultMap id="cdVOResultMap" class="cdVO">
		<result property="cdId" column="CD_ID"/>
		<result property="cdNm" column="CD_NM"/>
		<result property="cdTpId" column="CD_TP_ID"/>
		<result property="delFg" column="DEL_FG"/>
		<result property="updateDate" column="UPDATE_DATE"/>
	</resultMap>

	<select id="findCdListFC" parameterClass="java.lang.String" resultMap="cdVOResultMap">
		SELECT CD_ID, CD_NM, CD_TP_ID, DEL_FG, to_char(UPDATE_DATE, 'YYYY/MM/DD HH24:MI:SS') UPDATE_DATE FROM CD
		WHERE CD_TP_ID = #cdTpId#
		ORDER BY 3, 1
	</select>


	<select id="findCdList" parameterClass="cdVO" resultMap="cdVOResultMap">
		SELECT CD_ID, CD_NM, CD_TP_ID, DEL_FG, to_char(UPDATE_DATE, 'YYYY/MM/DD HH24:MI:SS') UPDATE_DATE FROM CD
		<dynamic prepend="WHERE">

		<isNotEmpty prepend="AND" property="cdTpId">
		CD_TP_ID = #cdTpId#
		</isNotEmpty>

		<isNotEmpty prepend="AND" property="cdId">
		CD_ID LIKE '%$cdId$%'
		</isNotEmpty>

		<isNotEmpty prepend="AND" property="cdNm">
		CD_NM LIKE '%$cdNm$%'
		</isNotEmpty>

		</dynamic>
		ORDER BY 3, 1
	</select>

	<select id="findCdList_cnt" parameterClass="cdVO" resultClass="java.lang.Integer">
		SELECT count(*) as value FROM CD
		<dynamic prepend="WHERE">

		<isNotEmpty prepend="AND" property="cdTpId">
		CD_TP_ID = #cdTpId#
		</isNotEmpty>

		<isNotEmpty prepend="AND" property="cdId">
		CD_ID LIKE '%$cdId$%'
		</isNotEmpty>

		<isNotEmpty prepend="AND" property="cdNm">
		CD_NM LIKE '%$cdNm$%'
		</isNotEmpty>

		</dynamic>
	</select>

	<select id="findCd" parameterClass="cdVO" resultMap="cdVOResultMap">
		SELECT CD_ID, CD_NM, CD_TP_ID, DEL_FG, to_char(UPDATE_DATE, 'YYYY/MM/DD HH24:MI:SS') UPDATE_DATE FROM CD 
		WHERE CD_TP_ID=#cdTpId# and CD_ID = #cdId#
	</select>

	<insert id="createCd" parameterClass="cdVO">
	 <![CDATA[ 
		insert into CD (CD_ID, CD_NM, CD_TP_ID, DEL_FG, UPDATE_DATE) 
		       values (#cdId:VARCHAR#, #cdNm:VARCHAR#, #cdTpId:VARCHAR#, #delFg:VARCHAR#, sysdate)
	 ]]>
	</insert>

	<delete id="deleteCd" parameterClass="cdVO">
	 <![CDATA[ 
		DELETE FROM CD 
		WHERE  CD_ID= #cdId:VARCHAR# 
		AND    CD_TP_ID = #cdTpId:VARCHAR#
	 ]]>
	</delete>

	 
	 <update id="updateCd"  parameterClass="cdVO" > 
	 <![CDATA[ 
	  UPDATE CD
	  SET      CD_ID = #cdId:VARCHAR# 
			 , CD_NM = #cdNm:VARCHAR# 
			 , CD_TP_ID = #cdTpId:VARCHAR# 
			 , DEL_FG = #delFg:VARCHAR# 
			 , UPDATE_DATE = sysdate 
	  WHERE  CD_ID = #cdId:VARCHAR#
	  AND    CD_TP_ID = #cdTpId:VARCHAR#
	 ]]>
	 </update>

</sqlMap>